import React, { useState, useEffect, useRef } from 'react';
import styles from './panel.scss';
import { Icon } from '@blueprintjs/core';
export const PanelContext = React.createContext({ state: {}, setState: () => { } });
export const Panel = React.forwardRef(function Panel({ contentsRef, className, collapsedClassName, titleBarClassName, contentsClassName, title, TitleComponent, TitleComponentSecondary, iconCollapsed, iconExpanded, isCollapsible, isCollapsedByDefault, children }, wrapperRef) {
    const [isCollapsed, setCollapsedState] = useState(isCollapsedByDefault || false);
    const [panelState, setPanelState] = useState({});
    function onCollapse() {
        setCollapsedState(true);
    }
    function onExpand() {
        setCollapsedState(false);
    }
    const _contentsRef = useRef(null);
    useEffect(() => {
        if (contentsRef && _contentsRef.current) {
            contentsRef(_contentsRef.current);
        }
    });
    const toggleIcon = isCollapsed
        ? (iconCollapsed || 'caret-right')
        : (iconExpanded || 'caret-down');
    return (React.createElement("div", { ref: wrapperRef, className: `
          ${className || ''}
          ${styles.panel}
          ${isCollapsible === true ? styles.panelCollapsible : ''}
          ${isCollapsible === true && isCollapsed === true
            ? `${styles.panelCollapsed} ${collapsedClassName}`
            : ''}` },
        React.createElement(PanelContext.Provider, { value: {
                state: panelState,
                setState: setPanelState,
            } },
            title || TitleComponent || isCollapsible
                ? React.createElement("div", { className: `${styles.panelTitleBar} ${titleBarClassName}`, onClick: (isCollapsible === true && isCollapsed === false)
                        ? onCollapse
                        : onExpand },
                    isCollapsible
                        ? React.createElement(Icon, { className: styles.panelTriggerIcon, icon: isCollapsible ? toggleIcon : 'blank' })
                        : null,
                    title || TitleComponent
                        ? React.createElement(React.Fragment, null,
                            React.createElement("span", { className: styles.title }, TitleComponent
                                ? React.createElement(TitleComponent, { isCollapsed: isCollapsed })
                                : title),
                            React.createElement("span", { className: styles.titleSecondary }, TitleComponentSecondary
                                ? React.createElement(TitleComponentSecondary, { isCollapsed: isCollapsed })
                                : null))
                        : null)
                : null,
            isCollapsible && isCollapsed
                ? null
                : React.createElement("div", { ref: _contentsRef, className: `${styles.panelContents} ${contentsClassName}` }, children))));
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFuZWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvcGFuZWwudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sS0FBSyxFQUFFLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsTUFBTSxPQUFPLENBQUM7QUFFM0QsT0FBTyxNQUFNLE1BQU0sY0FBYyxDQUFDO0FBQ2xDLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUd6QyxNQUFNLENBQUMsTUFBTSxZQUFZLEdBQ3ZCLEtBQUssQ0FBQyxhQUFhLENBQ2xCLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsR0FBRyxFQUFFLEdBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQXVCdEMsTUFBTSxDQUFDLE1BQU0sS0FBSyxHQUFHLEtBQUssQ0FBQyxVQUFVLENBQTZCLFNBQVMsS0FBSyxDQUFDLEVBQzdFLFdBQVcsRUFDWCxTQUFTLEVBQUUsa0JBQWtCLEVBQzdCLGlCQUFpQixFQUNqQixpQkFBaUIsRUFFakIsS0FBSyxFQUFFLGNBQWMsRUFBRSx1QkFBdUIsRUFDOUMsYUFBYSxFQUFFLFlBQVksRUFDM0IsYUFBYSxFQUFFLG9CQUFvQixFQUNuQyxRQUFRLEVBQUUsRUFBRSxVQUFVO0lBRXhCLE1BQU0sQ0FBQyxXQUFXLEVBQUUsaUJBQWlCLENBQUMsR0FDcEMsUUFBUSxDQUFVLG9CQUFvQixJQUFJLEtBQUssQ0FBQyxDQUFDO0lBRW5ELE1BQU0sQ0FBQyxVQUFVLEVBQUUsYUFBYSxDQUFDLEdBQUcsUUFBUSxDQUFTLEVBQUUsQ0FBQyxDQUFDO0lBRXpELFNBQVMsVUFBVTtRQUNqQixpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUMxQixDQUFDO0lBQ0QsU0FBUyxRQUFRO1FBQ2YsaUJBQWlCLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDM0IsQ0FBQztJQUVELE1BQU0sWUFBWSxHQUFHLE1BQU0sQ0FBd0IsSUFBSSxDQUFDLENBQUM7SUFFekQsU0FBUyxDQUFDLEdBQUcsRUFBRTtRQUNiLElBQUksV0FBVyxJQUFJLFlBQVksQ0FBQyxPQUFPLEVBQUU7WUFDdkMsV0FBVyxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQztTQUNuQztJQUNILENBQUMsQ0FBQyxDQUFDO0lBRUgsTUFBTSxVQUFVLEdBQWEsV0FBVztRQUN0QyxDQUFDLENBQUMsQ0FBQyxhQUFhLElBQUksYUFBYSxDQUFDO1FBQ2xDLENBQUMsQ0FBQyxDQUFDLFlBQVksSUFBSSxZQUFZLENBQUMsQ0FBQztJQUVuQyxPQUFPLENBQ0wsNkJBQ0ksR0FBRyxFQUFFLFVBQVUsRUFDZixTQUFTLEVBQUU7WUFDUCxTQUFTLElBQUksRUFBRTtZQUNmLE1BQU0sQ0FBQyxLQUFLO1lBQ1osYUFBYSxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxFQUFFO1lBQ3JELGFBQWEsS0FBSyxJQUFJLElBQUksV0FBVyxLQUFLLElBQUk7WUFDNUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLGNBQWMsSUFBSSxrQkFBa0IsRUFBRTtZQUNsRCxDQUFDLENBQUMsRUFBRSxFQUFFO1FBRWQsb0JBQUMsWUFBWSxDQUFDLFFBQVEsSUFBQyxLQUFLLEVBQUU7Z0JBQzFCLEtBQUssRUFBRSxVQUFVO2dCQUNqQixRQUFRLEVBQUUsYUFBYTthQUN4QjtZQUVBLEtBQUssSUFBSSxjQUFjLElBQUksYUFBYTtnQkFDdkMsQ0FBQyxDQUFDLDZCQUNJLFNBQVMsRUFBRSxHQUFHLE1BQU0sQ0FBQyxhQUFhLElBQUksaUJBQWlCLEVBQUUsRUFDekQsT0FBTyxFQUFFLENBQUMsYUFBYSxLQUFLLElBQUksSUFBSSxXQUFXLEtBQUssS0FBSyxDQUFDO3dCQUN4RCxDQUFDLENBQUMsVUFBVTt3QkFDWixDQUFDLENBQUMsUUFBUTtvQkFFYixhQUFhO3dCQUNaLENBQUMsQ0FBQyxvQkFBQyxJQUFJLElBQ0gsU0FBUyxFQUFFLE1BQU0sQ0FBQyxnQkFBZ0IsRUFDbEMsSUFBSSxFQUFFLGFBQWEsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxPQUFPLEdBQzFDO3dCQUNKLENBQUMsQ0FBQyxJQUFJO29CQUVQLEtBQUssSUFBSSxjQUFjO3dCQUN0QixDQUFDLENBQUM7NEJBQ0UsOEJBQU0sU0FBUyxFQUFFLE1BQU0sQ0FBQyxLQUFLLElBQzFCLGNBQWM7Z0NBQ2IsQ0FBQyxDQUFDLG9CQUFDLGNBQWMsSUFBQyxXQUFXLEVBQUUsV0FBVyxHQUFJO2dDQUM5QyxDQUFDLENBQUMsS0FBSyxDQUNKOzRCQUNQLDhCQUFNLFNBQVMsRUFBRSxNQUFNLENBQUMsY0FBYyxJQUNuQyx1QkFBdUI7Z0NBQ3RCLENBQUMsQ0FBQyxvQkFBQyx1QkFBdUIsSUFBQyxXQUFXLEVBQUUsV0FBVyxHQUFJO2dDQUN2RCxDQUFDLENBQUMsSUFBSSxDQUNILENBQ047d0JBQ0wsQ0FBQyxDQUFDLElBQUksQ0FDSjtnQkFDUixDQUFDLENBQUMsSUFBSTtZQUVQLGFBQWEsSUFBSSxXQUFXO2dCQUMzQixDQUFDLENBQUMsSUFBSTtnQkFDTixDQUFDLENBQUMsNkJBQ0ksR0FBRyxFQUFFLFlBQVksRUFDakIsU0FBUyxFQUFFLEdBQUcsTUFBTSxDQUFDLGFBQWEsSUFBSSxpQkFBaUIsRUFBRSxJQUMxRCxRQUFRLENBQ0wsQ0FFWSxDQUNwQixDQUNQLENBQUM7QUFDSixDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBJY29uTmFtZSB9IGZyb20gJ0BibHVlcHJpbnRqcy9pY29ucyc7XG5pbXBvcnQgc3R5bGVzIGZyb20gJy4vcGFuZWwuc2Nzcyc7XG5pbXBvcnQgeyBJY29uIH0gZnJvbSAnQGJsdWVwcmludGpzL2NvcmUnO1xuXG5cbmV4cG9ydCBjb25zdCBQYW5lbENvbnRleHQgPVxuICBSZWFjdC5jcmVhdGVDb250ZXh0PHsgc3RhdGU6IGFueSwgc2V0U3RhdGU6IChvcHRzOiBhbnkpID0+IHZvaWQgfT5cbiAgKHsgc3RhdGU6IHt9LCBzZXRTdGF0ZTogKCkgPT4ge30gfSk7XG5cblxuZXhwb3J0IGludGVyZmFjZSBQYW5lbFByb3BzIHtcbiAgY29udGVudHNSZWY/OiAoZWw6IEhUTUxEaXZFbGVtZW50KSA9PiB2b2lkLFxuXG4gIHRpdGxlPzogc3RyaW5nXG4gIFRpdGxlQ29tcG9uZW50PzogUmVhY3QuRkM8eyBpc0NvbGxhcHNlZD86IGJvb2xlYW4gfT5cbiAgVGl0bGVDb21wb25lbnRTZWNvbmRhcnk/OiBSZWFjdC5GQzx7IGlzQ29sbGFwc2VkPzogYm9vbGVhbiB9PlxuXG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGVcblxuICBpc0NvbGxhcHNpYmxlPzogdHJ1ZVxuICBpc0NvbGxhcHNlZEJ5RGVmYXVsdD86IHRydWVcblxuICBjbGFzc05hbWU/OiBzdHJpbmdcbiAgY29sbGFwc2VkQ2xhc3NOYW1lPzogc3RyaW5nXG4gIHRpdGxlQmFyQ2xhc3NOYW1lPzogc3RyaW5nXG4gIGNvbnRlbnRzQ2xhc3NOYW1lPzogc3RyaW5nXG5cbiAgaWNvbkNvbGxhcHNlZD86IEljb25OYW1lXG4gIGljb25FeHBhbmRlZD86IEljb25OYW1lXG59XG5leHBvcnQgY29uc3QgUGFuZWwgPSBSZWFjdC5mb3J3YXJkUmVmPEhUTUxEaXZFbGVtZW50LCBQYW5lbFByb3BzPihmdW5jdGlvbiBQYW5lbCh7XG4gICAgY29udGVudHNSZWYsXG4gICAgY2xhc3NOYW1lLCBjb2xsYXBzZWRDbGFzc05hbWUsXG4gICAgdGl0bGVCYXJDbGFzc05hbWUsXG4gICAgY29udGVudHNDbGFzc05hbWUsXG5cbiAgICB0aXRsZSwgVGl0bGVDb21wb25lbnQsIFRpdGxlQ29tcG9uZW50U2Vjb25kYXJ5LFxuICAgIGljb25Db2xsYXBzZWQsIGljb25FeHBhbmRlZCxcbiAgICBpc0NvbGxhcHNpYmxlLCBpc0NvbGxhcHNlZEJ5RGVmYXVsdCxcbiAgICBjaGlsZHJlbiB9LCB3cmFwcGVyUmVmKSB7XG5cbiAgY29uc3QgW2lzQ29sbGFwc2VkLCBzZXRDb2xsYXBzZWRTdGF0ZV0gPVxuICAgIHVzZVN0YXRlPGJvb2xlYW4+KGlzQ29sbGFwc2VkQnlEZWZhdWx0IHx8IGZhbHNlKTtcblxuICBjb25zdCBbcGFuZWxTdGF0ZSwgc2V0UGFuZWxTdGF0ZV0gPSB1c2VTdGF0ZTxvYmplY3Q+KHt9KTtcblxuICBmdW5jdGlvbiBvbkNvbGxhcHNlKCkge1xuICAgIHNldENvbGxhcHNlZFN0YXRlKHRydWUpO1xuICB9XG4gIGZ1bmN0aW9uIG9uRXhwYW5kKCkge1xuICAgIHNldENvbGxhcHNlZFN0YXRlKGZhbHNlKTtcbiAgfVxuXG4gIGNvbnN0IF9jb250ZW50c1JlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudCB8IG51bGw+KG51bGwpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNvbnRlbnRzUmVmICYmIF9jb250ZW50c1JlZi5jdXJyZW50KSB7XG4gICAgICBjb250ZW50c1JlZihfY29udGVudHNSZWYuY3VycmVudCk7XG4gICAgfVxuICB9KTtcblxuICBjb25zdCB0b2dnbGVJY29uOiBJY29uTmFtZSA9IGlzQ29sbGFwc2VkXG4gICAgPyAoaWNvbkNvbGxhcHNlZCB8fCAnY2FyZXQtcmlnaHQnKVxuICAgIDogKGljb25FeHBhbmRlZCB8fCAnY2FyZXQtZG93bicpO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgICByZWY9e3dyYXBwZXJSZWZ9XG4gICAgICAgIGNsYXNzTmFtZT17YFxuICAgICAgICAgICR7Y2xhc3NOYW1lIHx8ICcnfVxuICAgICAgICAgICR7c3R5bGVzLnBhbmVsfVxuICAgICAgICAgICR7aXNDb2xsYXBzaWJsZSA9PT0gdHJ1ZSA/IHN0eWxlcy5wYW5lbENvbGxhcHNpYmxlIDogJyd9XG4gICAgICAgICAgJHtpc0NvbGxhcHNpYmxlID09PSB0cnVlICYmIGlzQ29sbGFwc2VkID09PSB0cnVlXG4gICAgICAgICAgICAgID8gYCR7c3R5bGVzLnBhbmVsQ29sbGFwc2VkfSAke2NvbGxhcHNlZENsYXNzTmFtZX1gXG4gICAgICAgICAgICAgIDogJyd9YH0+XG5cbiAgICAgIDxQYW5lbENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3tcbiAgICAgICAgICBzdGF0ZTogcGFuZWxTdGF0ZSxcbiAgICAgICAgICBzZXRTdGF0ZTogc2V0UGFuZWxTdGF0ZSxcbiAgICAgICAgfX0+XG5cbiAgICAgICAge3RpdGxlIHx8IFRpdGxlQ29tcG9uZW50IHx8IGlzQ29sbGFwc2libGVcbiAgICAgICAgICA/IDxkaXZcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake3N0eWxlcy5wYW5lbFRpdGxlQmFyfSAke3RpdGxlQmFyQ2xhc3NOYW1lfWB9XG4gICAgICAgICAgICAgICAgb25DbGljaz17KGlzQ29sbGFwc2libGUgPT09IHRydWUgJiYgaXNDb2xsYXBzZWQgPT09IGZhbHNlKVxuICAgICAgICAgICAgICAgICAgPyBvbkNvbGxhcHNlXG4gICAgICAgICAgICAgICAgICA6IG9uRXhwYW5kfT5cblxuICAgICAgICAgICAgICB7aXNDb2xsYXBzaWJsZVxuICAgICAgICAgICAgICAgID8gPEljb25cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMucGFuZWxUcmlnZ2VySWNvbn1cbiAgICAgICAgICAgICAgICAgICAgaWNvbj17aXNDb2xsYXBzaWJsZSA/IHRvZ2dsZUljb24gOiAnYmxhbmsnfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA6IG51bGx9XG5cbiAgICAgICAgICAgICAge3RpdGxlIHx8IFRpdGxlQ29tcG9uZW50XG4gICAgICAgICAgICAgICAgPyA8PlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e3N0eWxlcy50aXRsZX0+XG4gICAgICAgICAgICAgICAgICAgICAge1RpdGxlQ29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgICA/IDxUaXRsZUNvbXBvbmVudCBpc0NvbGxhcHNlZD17aXNDb2xsYXBzZWR9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA6IHRpdGxlfVxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17c3R5bGVzLnRpdGxlU2Vjb25kYXJ5fT5cbiAgICAgICAgICAgICAgICAgICAgICB7VGl0bGVDb21wb25lbnRTZWNvbmRhcnlcbiAgICAgICAgICAgICAgICAgICAgICAgID8gPFRpdGxlQ29tcG9uZW50U2Vjb25kYXJ5IGlzQ29sbGFwc2VkPXtpc0NvbGxhcHNlZH0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgOiBudWxsfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgOiBudWxsfVxuXG4gICAgICAgIHtpc0NvbGxhcHNpYmxlICYmIGlzQ29sbGFwc2VkXG4gICAgICAgICAgPyBudWxsXG4gICAgICAgICAgOiA8ZGl2XG4gICAgICAgICAgICAgICAgcmVmPXtfY29udGVudHNSZWZ9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtzdHlsZXMucGFuZWxDb250ZW50c30gJHtjb250ZW50c0NsYXNzTmFtZX1gfT5cbiAgICAgICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICAgICAgPC9kaXY+fVxuXG4gICAgICA8L1BhbmVsQ29udGV4dC5Qcm92aWRlcj5cbiAgICA8L2Rpdj5cbiAgKTtcbn0pO1xuIl19